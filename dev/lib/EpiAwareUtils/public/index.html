<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Public API · EpiAware.jl</title><meta name="title" content="Public API · EpiAware.jl"/><meta property="og:title" content="Public API · EpiAware.jl"/><meta property="twitter:title" content="Public API · EpiAware.jl"/><meta name="description" content="Documentation for EpiAware.jl."/><meta property="og:description" content="Documentation for EpiAware.jl."/><meta property="twitter:description" content="Documentation for EpiAware.jl."/><script data-outdated-warner src="../../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../../assets/documenter.js"></script><script src="../../../search_index.js"></script><script src="../../../siteinfo.js"></script><script src="../../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../../../">EpiAware.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../../">EpiAware.jl: Real-time infectious disease monitoring</a></li><li><span class="tocitem">Getting started</span><ul><li><a class="tocitem" href="../../../getting-started/">Overview</a></li><li><a class="tocitem" href="../../../getting-started/installation/">Installation</a></li><li><a class="tocitem" href="../../../getting-started/quickstart/">Quickstart</a></li><li><a class="tocitem" href="../../../getting-started/faq/">Frequently asked questions</a></li><li><input class="collapse-toggle" id="menuitem-2-5" type="checkbox"/><label class="tocitem" for="menuitem-2-5"><span class="docs-label">Explainers</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../../getting-started/explainers/">Overview</a></li><li><a class="tocitem" href="../../../getting-started/explainers/julia/">Working with Julia</a></li><li><a class="tocitem" href="../../../getting-started/explainers/intro/">Introduction to EpiAware</a></li><li><a class="tocitem" href="../../../getting-started/explainers/modelling-infections/">Modelling infections</a></li><li><a class="tocitem" href="../../../getting-started/explainers/inference/">Inference</a></li><li><a class="tocitem" href="../../../getting-started/explainers/latent-models/">Latent models</a></li><li><a class="tocitem" href="../../../getting-started/explainers/observation-models/">Observation models</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-2-6" type="checkbox"/><label class="tocitem" for="menuitem-2-6"><span class="docs-label">Tutorials</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../../getting-started/tutorials/">Overview</a></li><li><a class="tocitem" href="../../../getting-started/tutorials/simple-renewal-with-delays/">Simple renewal with delays</a></li><li><a class="tocitem" href="../../../getting-started/tutorials/nowcasting/">Nowcasting</a></li><li><a class="tocitem" href="../../../getting-started/tutorials/multiple-observation-models/">Multiple observation models</a></li><li><a class="tocitem" href="../../../getting-started/tutorials/multiple-infection-processes/">Multiple infection processes</a></li><li><a class="tocitem" href="../../../getting-started/tutorials/censored-obs/">Fitting distributions with censored data</a></li><li><a class="tocitem" href="../../../getting-started/tutorials/partial-pooling/">Partial pooling</a></li></ul></li></ul></li><li><span class="tocitem">Showcase</span><ul><li><a class="tocitem" href="../../../showcase/">Overview</a></li><li><input class="collapse-toggle" id="menuitem-3-2" type="checkbox"/><label class="tocitem" for="menuitem-3-2"><span class="docs-label">Replication</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../../showcase/replications/mishra-2020/">On the derivation of the renewal equation from an age-dependent branching process: an epidemic modelling perspective</a></li><li><a class="tocitem" href="../../../showcase/replications/chatzilena-2019/">Statistical inference for ODE-based infectious disease models</a></li></ul></li></ul></li><li><span class="tocitem">What is EpiAware?</span><ul><li><a class="tocitem" href="../../../overview/">Overview</a></li></ul></li><li><span class="tocitem">Modules</span><ul><li><input class="collapse-toggle" id="menuitem-5-1" type="checkbox"/><label class="tocitem" for="menuitem-5-1"><span class="docs-label">EpiAware</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../">Overview</a></li><li><a class="tocitem" href="../../public/">Public API</a></li><li><a class="tocitem" href="../../internals/">Internal API</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-5-2" type="checkbox"/><label class="tocitem" for="menuitem-5-2"><span class="docs-label">EpiAwareBase</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../EpiAwareBase/">Overview</a></li><li><a class="tocitem" href="../../EpiAwareBase/public/">Public API</a></li><li><a class="tocitem" href="../../EpiAwareBase/internals/">Internal API</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-5-3" type="checkbox" checked/><label class="tocitem" for="menuitem-5-3"><span class="docs-label">EpiAwareUtils</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../">Overview</a></li><li class="is-active"><a class="tocitem" href>Public API</a><ul class="internal"><li><a class="tocitem" href="#Contents"><span>Contents</span></a></li><li><a class="tocitem" href="#Index"><span>Index</span></a></li><li><a class="tocitem" href="#Public-API"><span>Public API</span></a></li></ul></li><li><a class="tocitem" href="../internals/">Internal API</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-5-4" type="checkbox"/><label class="tocitem" for="menuitem-5-4"><span class="docs-label">EpiInference</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../EpiInference/">Overview</a></li><li><a class="tocitem" href="../../EpiInference/public/">Public API</a></li><li><a class="tocitem" href="../../EpiInference/internals/">Internal API</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-5-5" type="checkbox"/><label class="tocitem" for="menuitem-5-5"><span class="docs-label">EpiInfModels</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../EpiInfModels/">Overview</a></li><li><a class="tocitem" href="../../EpiInfModels/public/">Public API</a></li><li><a class="tocitem" href="../../EpiInfModels/internals/">Internal API</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-5-6" type="checkbox"/><label class="tocitem" for="menuitem-5-6"><span class="docs-label">EpiLatentModels</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../EpiLatentModels/">Overview</a></li><li><a class="tocitem" href="../../EpiLatentModels/public/">Public API</a></li><li><a class="tocitem" href="../../EpiLatentModels/internals/">Internal API</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-5-7" type="checkbox"/><label class="tocitem" for="menuitem-5-7"><span class="docs-label">EpiObsModels</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../EpiObsModels/">Overview</a></li><li><a class="tocitem" href="../../EpiObsModels/public/">Public API</a></li><li><a class="tocitem" href="../../EpiObsModels/internals/">Internal API</a></li></ul></li></ul></li><li><span class="tocitem">Developers</span><ul><li><a class="tocitem" href="../../../developer/">Overview</a></li><li><a class="tocitem" href="../../../developer/contributing/">Contributing</a></li><li><a class="tocitem" href="../../../developer/checklist/">Release checklist</a></li></ul></li><li><a class="tocitem" href="../../../release-notes/">Release notes</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Modules</a></li><li><a class="is-disabled">EpiAwareUtils</a></li><li class="is-active"><a href>Public API</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Public API</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/CDCgov/Rt-without-renewal" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/CDCgov/Rt-without-renewal/blob/main/docs/src/lib/EpiAwareUtils/public.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Public-Documentation"><a class="docs-heading-anchor" href="#Public-Documentation">Public Documentation</a><a id="Public-Documentation-1"></a><a class="docs-heading-anchor-permalink" href="#Public-Documentation" title="Permalink"></a></h1><p>Documentation for <code>EpiAwareBae.jl</code>&#39;s public interface.</p><p>See the Internals section of the manual for internal package docs covering all submodules.</p><h2 id="Contents"><a class="docs-heading-anchor" href="#Contents">Contents</a><a id="Contents-1"></a><a class="docs-heading-anchor-permalink" href="#Contents" title="Permalink"></a></h2><ul><li><a href="#Contents">Contents</a></li><li><a href="#Index">Index</a></li><li><a href="#Public-API">Public API</a></li></ul><h2 id="Index"><a class="docs-heading-anchor" href="#Index">Index</a><a id="Index-1"></a><a class="docs-heading-anchor-permalink" href="#Index" title="Permalink"></a></h2><ul><li><a href="#EpiAware.EpiAwareUtils"><code>EpiAware.EpiAwareUtils</code></a></li><li><a href="#EpiAware.EpiAwareUtils.DirectSample"><code>EpiAware.EpiAwareUtils.DirectSample</code></a></li><li><a href="#EpiAware.EpiAwareUtils.HalfNormal"><code>EpiAware.EpiAwareUtils.HalfNormal</code></a></li><li><a href="#EpiAware.EpiAwareUtils.SafeNegativeBinomial"><code>EpiAware.EpiAwareUtils.SafeNegativeBinomial</code></a></li><li><a href="#EpiAware.EpiAwareUtils.SafePoisson"><code>EpiAware.EpiAwareUtils.SafePoisson</code></a></li><li><a href="#EpiAware.EpiAwareUtils.accumulate_scan-Tuple{AbstractAccumulationStep, Any, Any}"><code>EpiAware.EpiAwareUtils.accumulate_scan</code></a></li><li><a href="#EpiAware.EpiAwareUtils.censored_cdf-Tuple{Distributions.Distribution}"><code>EpiAware.EpiAwareUtils.censored_cdf</code></a></li><li><a href="#EpiAware.EpiAwareUtils.censored_pmf-Tuple{Distributions.Distribution, Val{:single_censored}}"><code>EpiAware.EpiAwareUtils.censored_pmf</code></a></li><li><a href="#EpiAware.EpiAwareUtils.censored_pmf-Tuple{Distributions.Distribution}"><code>EpiAware.EpiAwareUtils.censored_pmf</code></a></li><li><a href="#EpiAware.EpiAwareUtils.get_param_array-Tuple{MCMCChains.Chains}"><code>EpiAware.EpiAwareUtils.get_param_array</code></a></li><li><a href="#EpiAware.EpiAwareUtils.get_state-Tuple{AbstractAccumulationStep, Any, Any}"><code>EpiAware.EpiAwareUtils.get_state</code></a></li><li><a href="#EpiAware.EpiAwareUtils.prefix_submodel-Tuple{AbstractModel, Function, String, Vararg{Any}}"><code>EpiAware.EpiAwareUtils.prefix_submodel</code></a></li><li><a href="#EpiAware.EpiAwareUtils.scan-Union{Tuple{F}, Tuple{F, Any, Any}} where F&lt;:AbstractModel"><code>EpiAware.EpiAwareUtils.scan</code></a></li><li><a href="#EpiAware.EpiAwareUtils.spread_draws-Tuple{MCMCChains.Chains}"><code>EpiAware.EpiAwareUtils.spread_draws</code></a></li><li><a href="#EpiAware.EpiAwareUtils.∫F-Tuple{Any, Any, Any}"><code>EpiAware.EpiAwareUtils.∫F</code></a></li></ul><h2 id="Public-API"><a class="docs-heading-anchor" href="#Public-API">Public API</a><a id="Public-API-1"></a><a class="docs-heading-anchor-permalink" href="#Public-API" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="EpiAware.EpiAwareUtils" href="#EpiAware.EpiAwareUtils"><code>EpiAware.EpiAwareUtils</code></a> — <span class="docstring-category">Module</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Module for defining utility functions.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CDCgov/Rt-without-renewal/blob/822a0aa5f1bf87486681c940e125ef12cd5f52a6/src/EpiAwareUtils/EpiAwareUtils.jl#L1-L3">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="EpiAware.EpiAwareUtils.DirectSample" href="#EpiAware.EpiAwareUtils.DirectSample"><code>EpiAware.EpiAwareUtils.DirectSample</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">struct DirectSample &lt;: AbstractEpiSamplingMethod</code></pre><p>Sample directly from a <code>Turing</code> model.</p><hr/><p><strong>Fields</strong></p><ul><li><code>n_samples::Union{Nothing, Int64}</code>: Number of samples from a model. If an integer is provided, the model is      sampled <code>n_samples</code> times using <code>Turing.Prior()</code> returning an <code>MCMChains.      Chain</code> object. If <code>nothing</code>, the model is sampled once returning a      <code>NamedTuple</code> object of the sampled random variables along with generated      quantities</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CDCgov/Rt-without-renewal/blob/822a0aa5f1bf87486681c940e125ef12cd5f52a6/src/EpiAwareUtils/DirectSample.jl#L1">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="EpiAware.EpiAwareUtils.HalfNormal" href="#EpiAware.EpiAwareUtils.HalfNormal"><code>EpiAware.EpiAwareUtils.HalfNormal</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">struct HalfNormal{T&lt;:Real} &lt;: Distributions.Distribution{Distributions.Univariate, Distributions.Continuous}</code></pre><p>Create a half-normal prior distribution with the specified mean.</p><p><strong>Arguments:</strong></p><ul><li><code>μ</code>: The mean of the half-normal distribution.</li></ul><p><strong>Returns:</strong></p><ul><li>A <code>HalfNormal</code> distribution with the specified mean.</li></ul><p><strong>Examples:</strong></p><pre><code class="language-julia hljs">using EpiAware, Distributions

hn = HalfNormal(1.0)
# output
EpiAware.EpiAwareUtils.HalfNormal{Float64}(μ=1.0)</code></pre><p><strong>filter out all the values that are less than 0</strong></p><pre><code class="language-julia hljs">rand(hn)
# output
0.4508533245229199</code></pre><pre><code class="language-julia hljs">cdf(hn, 2)
# output
0.8894596502772643</code></pre><pre><code class="language-julia hljs">quantile(hn, 0.5)
# output
0.8453475393951495</code></pre><pre><code class="language-julia hljs">logpdf(hn, 2)
# output
-3.1111166111445083</code></pre><pre><code class="language-julia hljs">mean(hn)
# output
1.0</code></pre><pre><code class="language-julia hljs">var(hn)
# output
0.5707963267948966</code></pre><hr/><p><strong>Fields</strong></p><ul><li><code>μ::Real</code></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CDCgov/Rt-without-renewal/blob/822a0aa5f1bf87486681c940e125ef12cd5f52a6/src/EpiAwareUtils/HalfNormal.jl#L1">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="EpiAware.EpiAwareUtils.SafeNegativeBinomial" href="#EpiAware.EpiAwareUtils.SafeNegativeBinomial"><code>EpiAware.EpiAwareUtils.SafeNegativeBinomial</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">struct SafeNegativeBinomial{T&lt;:Real} &lt;: Distributions.Distribution{Distributions.Univariate, Distributions.Discrete}</code></pre><p>Create a Negative binomial distribution with the specified mean that avoids <code>InExactError</code> when the mean is too large.</p><p><strong>Parameterisation:</strong></p><p>We are using a mean and cluster factorization of the negative binomial distribution such that the variance to mean relationship is:</p><p class="math-container">\[\sigma^2  = \mu + \alpha^2 \mu^2\]</p><p>The reason for this parameterisation is that at sufficiently large mean values (i.e. <code>r &gt; 1 / p</code>) <code>p</code> is approximately equal to the standard fluctuation of the distribution, e.g. if <code>p = 0.05</code> we expect typical fluctuations of samples from the negative binomial to be about 5% of the mean when the mean is notably larger than 20. Otherwise, we expect approximately Poisson noise. In our opinion, this parameterisation is useful for specifying the distribution in a way that is easier to reason on priors for <code>p</code>.</p><p><strong>Arguments:</strong></p><ul><li><code>r</code>: The number of successes, although this can be extended to a continous number.</li><li><code>p</code>: Success rate.</li></ul><p><strong>Returns:</strong></p><ul><li>A <code>SafeNegativeBinomial</code> distribution with the specified mean.</li></ul><p><strong>Examples:</strong></p><pre><code class="language-julia hljs">using EpiAware, Distributions

bigμ = exp(48.0) #Large value of μ
σ² = bigμ + 0.05 * bigμ^2 #Large variance

# We can calculate the success rate from the mean to variance relationship
p = bigμ / σ²
r = bigμ * p / (1 - p)
d = SafeNegativeBinomial(r, p)
# output
EpiAware.EpiAwareUtils.SafeNegativeBinomial{Float64}(r=20.0, p=2.85032816548187e-20)</code></pre><pre><code class="language-julia hljs">cdf(d, 100)
# output
0.0</code></pre><pre><code class="language-julia hljs">logpdf(d, 100)
# output
-850.1397180331871</code></pre><pre><code class="language-julia hljs">mean(d)
# output
7.016735912097631e20</code></pre><pre><code class="language-julia hljs">var(d)
# output
2.4617291430060293e40</code></pre><hr/><p><strong>Fields</strong></p><ul><li><p><code>r::Real</code></p></li><li><p><code>p::Real</code></p></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CDCgov/Rt-without-renewal/blob/822a0aa5f1bf87486681c940e125ef12cd5f52a6/src/EpiAwareUtils/SafeNegativeBinomial.jl#L1">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="EpiAware.EpiAwareUtils.SafePoisson" href="#EpiAware.EpiAwareUtils.SafePoisson"><code>EpiAware.EpiAwareUtils.SafePoisson</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">struct SafePoisson{T&lt;:Real} &lt;: Distributions.Distribution{Distributions.Univariate, Distributions.Discrete}</code></pre><p>Create a Poisson distribution with the specified mean that avoids <code>InExactError</code> when the mean is too large.</p><p><strong>Arguments:</strong></p><ul><li><code>λ</code>: The mean of the Poisson distribution.</li></ul><p><strong>Returns:</strong></p><ul><li>A <code>SafePoisson</code> distribution with the specified mean.</li></ul><p><strong>Examples:</strong></p><pre><code class="language-julia hljs">using EpiAware, Distributions

bigλ = exp(48.0) #Large value of λ
d = SafePoisson(bigλ)
# output
EpiAware.EpiAwareUtils.SafePoisson{Float64}(λ=7.016735912097631e20)</code></pre><pre><code class="language-julia hljs">cdf(d, 2)
# output
0.0</code></pre><pre><code class="language-julia hljs">logpdf(d, 100)
# output
-7.016735912097631e20</code></pre><pre><code class="language-julia hljs">mean(d)
# output
7.016735912097631e20</code></pre><pre><code class="language-julia hljs">var(d)
# output
7.016735912097631e20</code></pre><hr/><p><strong>Fields</strong></p><ul><li><code>λ::Real</code></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CDCgov/Rt-without-renewal/blob/822a0aa5f1bf87486681c940e125ef12cd5f52a6/src/EpiAwareUtils/SafePoisson.jl#L1">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="EpiAware.EpiAwareUtils.accumulate_scan-Tuple{AbstractAccumulationStep, Any, Any}" href="#EpiAware.EpiAwareUtils.accumulate_scan-Tuple{AbstractAccumulationStep, Any, Any}"><code>EpiAware.EpiAwareUtils.accumulate_scan</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">accumulate_scan(
    acc_step::AbstractAccumulationStep,
    initial_state,
    ϵ_t
) -&gt; Any
</code></pre><pre><code class="nohighlight hljs">Apply the `accumulate` function to the `AbstractAccumulationStep` object.
This is effectively a optimised version of a for loop that applies the
`AbstractAccumulationStep` object to the input data in a single pass.

# Arguments
- `acc_step::AbstractAccumulationStep: The accumulation step function.
- `initial_state`: The initial state of the accumulation.
- `ϵ_t::AbstractVector{&lt;:Real}`: The input data.

# Returns
- `state::AbstractVector{&lt;:Real}`: The accumulated state as returned by the
`get_state` function from the output of the `accumulate` function.

# Examples
```julia
using EpiAware
struct TestStep &lt;: AbstractAccumulationStep
    a::Float64
end

function (step::TestStep)(state, ϵ)
    new_state = step.a * ϵ
    return new_state
end

acc_step = TestStep(0.5)
initial_state = zeros(3)

accumulate_scan(acc_step, initial_state, [1.0, 2.0, 3.0])

function get_state(acc_step::TestStep, initial_state, state)
    return state
end

accumulate_scan(acc_step, initial_state, [1.0, 2.0, 3.0])
```</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CDCgov/Rt-without-renewal/blob/822a0aa5f1bf87486681c940e125ef12cd5f52a6/src/EpiAwareUtils/accumulate_scan.jl#L1">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="EpiAware.EpiAwareUtils.censored_cdf-Tuple{Distributions.Distribution}" href="#EpiAware.EpiAwareUtils.censored_cdf-Tuple{Distributions.Distribution}"><code>EpiAware.EpiAwareUtils.censored_cdf</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">censored_cdf(
    dist::Distributions.Distribution;
    Δd,
    D,
    upper
) -&gt; Any
</code></pre><p>Create a discrete probability cumulative distribution function (CDF) from a given distribution, assuming a uniform distribution over primary event times with censoring intervals of width <code>Δd</code> for both primary and secondary events.</p><p>NB: <code>censored_cdf</code> returns the <em>non-truncated</em> CDF, i.e. the CDF without conditioning on the secondary event occuring either before or after some time.</p><p><strong>Arguments</strong></p><ul><li><code>dist</code>: The distribution from which to create the PMF.</li><li><code>Δd</code>: The step size for discretizing the domain. Default is 1.0.</li><li><code>D</code>: The upper bound of the domain. Must be greater than <code>Δd</code>. Default <code>D = nothing</code></li></ul><p>indicates that the distribution should be truncated at its <code>upper</code>th percentile rounded to nearest multiple of <code>Δd</code>.</p><p><strong>Returns</strong></p><ul><li>A vector representing the CDF with 0.0 appended at the beginning.</li></ul><p><strong>Raises</strong></p><ul><li><code>AssertionError</code> if the minimum value of <code>dist</code> is negative.</li><li><code>AssertionError</code> if <code>Δd</code> is not positive.</li><li><code>AssertionError</code> if <code>D</code> is shorter than <code>Δd</code>.</li><li><code>AssertionError</code> if <code>D</code> is not a multiple of <code>Δd</code>.</li></ul><p><strong>Examples</strong></p><pre><code class="language-julia hljs">using Distributions
using EpiAware.EpiAwareUtils

dist = Exponential(1.0)

censored_cdf(dist; D = 10) |&gt;
    p -&gt; round.(p, digits=3)

# output
11-element Vector{Float64}:
 0.0
 0.368
 0.767
 0.914
 0.969
 0.988
 0.996
 0.998
 0.999
 1.0
 1.0</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CDCgov/Rt-without-renewal/blob/822a0aa5f1bf87486681c940e125ef12cd5f52a6/src/EpiAwareUtils/censored_pmf.jl#L97">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="EpiAware.EpiAwareUtils.censored_pmf-Tuple{Distributions.Distribution, Val{:single_censored}}" href="#EpiAware.EpiAwareUtils.censored_pmf-Tuple{Distributions.Distribution, Val{:single_censored}}"><code>EpiAware.EpiAwareUtils.censored_pmf</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">censored_pmf(
    dist::Distributions.Distribution,
    ::Val{:single_censored};
    primary_approximation_point,
    Δd,
    D
)
</code></pre><p>Create a discrete probability mass function (PMF) from a given distribution, assuming that the primary event happens at <code>primary_approximation_point * Δd</code> within an intial censoring interval. Common single-censoring approximations are <code>primary_approximation_point = 0</code> (left-hand approximation), <code>primary_approximation_point = 1</code> (right-hand) and <code>primary_approximation_point = 0.5</code> (midpoint).</p><p><strong>Arguments</strong></p><ul><li><code>dist</code>: The distribution from which to create the PMF.</li><li>::Val{:single_censored}: A dummy argument to dispatch to this method. The purpose of the <code>Val</code></li></ul><p>type argument is that to use <code>single-censored</code> approximation is an active decision.</p><ul><li><code>primary_approximation_point</code>: A approximation point for the primary time in its censoring interval.</li></ul><p>Default is 0.5 for midpoint approximation.</p><ul><li><code>Δd</code>: The step size for discretizing the domain. Default is 1.0.</li><li><code>D</code>: The upper bound of the domain. Must be greater than <code>Δd</code>.</li></ul><p><strong>Returns</strong></p><ul><li>A vector representing the PMF.</li></ul><p>Raises:</p><ul><li><code>AssertionError</code> if the minimum value of <code>dist</code> is negative.</li><li><code>AssertionError</code> if <code>Δd</code> is not positive.</li><li><code>AssertionError</code> if <code>D</code> is not greater than <code>Δd</code>.</li></ul><p><strong>Examples</strong></p><pre><code class="language-julia hljs">using Distributions
using EpiAware.EpiAwareUtils

dist = Exponential(1.0)

censored_pmf(dist, Val(:single_censored); D = 10) |&gt;
    p -&gt; round.(p, digits=3)

# output
10-element Vector{Float64}:
 0.393
 0.383
 0.141
 0.052
 0.019
 0.007
 0.003
 0.001
 0.0
 0.0</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CDCgov/Rt-without-renewal/blob/822a0aa5f1bf87486681c940e125ef12cd5f52a6/src/EpiAwareUtils/censored_pmf.jl#L1">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="EpiAware.EpiAwareUtils.censored_pmf-Tuple{Distributions.Distribution}" href="#EpiAware.EpiAwareUtils.censored_pmf-Tuple{Distributions.Distribution}"><code>EpiAware.EpiAwareUtils.censored_pmf</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">censored_pmf(
    dist::Distributions.Distribution;
    Δd,
    D,
    upper
) -&gt; Any
</code></pre><p>Create a discrete probability mass function (PMF) from a given distribution, assuming a uniform distribution over primary event times with censoring intervals of width <code>Δd</code> for both primary and secondary events. The CDF for the time from the left edge of the interval containing the primary event to the secondary event is created by direct numerical integration (quadrature) of the convolution of the CDF of <code>dist</code> with the uniform density on <code>[0,Δd)</code>, using the <code>censored_cdf</code> function. The discrete PMF for double censored delays is then found using simple differencing on the CDF.</p><p>NB: <code>censored_pmf</code> returns a <em>right-truncated</em> PMF, i.e. the PMF conditioned on the secondary event occurring before or on the final secondary censoring window.</p><p><strong>Arguments</strong></p><ul><li><code>dist</code>: The distribution from which to create the PMF.</li><li><code>Δd</code>: The step size for discretizing the domain. Default is 1.0.</li><li><code>D</code>: The upper bound of the domain. Must be greater than <code>Δd</code>. Default <code>D = nothing</code></li></ul><p>indicates that the distribution should be truncated at its <code>upper</code>th percentile rounded to nearest multiple of <code>Δd</code>.</p><p><strong>Returns</strong></p><ul><li>A vector representing the PMF.</li></ul><p><strong>Raises</strong></p><ul><li><code>AssertionError</code> if the minimum value of <code>dist</code> is negative.</li><li><code>AssertionError</code> if <code>Δd</code> is not positive.</li><li><code>AssertionError</code> if <code>D</code> is shorter than <code>Δd</code>.</li><li><code>AssertionError</code> if <code>D</code> is not a multiple of <code>Δd</code>.</li></ul><p><strong>Examples</strong></p><pre><code class="language-julia hljs">using Distributions
using EpiAware.EpiAwareUtils

dist = Exponential(1.0)

censored_pmf(dist; D = 10) |&gt;
    p -&gt; round.(p, digits=3)

# output
10-element Vector{Float64}:
 0.368
 0.4
 0.147
 0.054
 0.02
 0.007
 0.003
 0.001
 0.0
 0.0</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CDCgov/Rt-without-renewal/blob/822a0aa5f1bf87486681c940e125ef12cd5f52a6/src/EpiAwareUtils/censored_pmf.jl#L155">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="EpiAware.EpiAwareUtils.get_param_array-Tuple{MCMCChains.Chains}" href="#EpiAware.EpiAwareUtils.get_param_array-Tuple{MCMCChains.Chains}"><code>EpiAware.EpiAwareUtils.get_param_array</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">get_param_array(chn::MCMCChains.Chains) -&gt; Any
</code></pre><p>Extract a parameter array from a <code>Chains</code> object <code>chn</code> that matches the shape of number of sample and chain pairs in <code>chn</code>.</p><p><strong>Arguments</strong></p><ul><li><code>chn::Chains</code>: The <code>Chains</code> object containing the MCMC samples.</li></ul><p><strong>Returns</strong></p><ul><li><code>param_array</code>: An array of parameter samples, where each element corresponds to a single</li></ul><p>MCMC sample as a <code>NamedTuple</code>.</p><p><strong>Example</strong></p><p>Sampling from a simple model which has both scalar and vector quantity random variables across 4 chains.</p><pre><code class="language-julia hljs">using Turing, MCMCChains, EpiAware

@model function testmodel()
    y ~ Normal()
end
mdl = testmodel()
chn = sample(mdl, Prior(), MCMCSerial(), 2, 1, progress=false)

A = get_param_array(chn)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CDCgov/Rt-without-renewal/blob/822a0aa5f1bf87486681c940e125ef12cd5f52a6/src/EpiAwareUtils/get_param_array.jl#L1">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="EpiAware.EpiAwareUtils.get_state-Tuple{AbstractAccumulationStep, Any, Any}" href="#EpiAware.EpiAwareUtils.get_state-Tuple{AbstractAccumulationStep, Any, Any}"><code>EpiAware.EpiAwareUtils.get_state</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">get_state(
    acc_step::AbstractAccumulationStep,
    initial_state,
    state
) -&gt; Any
</code></pre><pre><code class="nohighlight hljs">Processes the output of the `accumulate` function to return the final state.

# Arguments
- `acc_step::AbstractAccumulationStep`: The accumulation step function.
- `initial_state`: The initial state of the accumulation.
- `state`: The output of the `accumulate` function.

# Returns
- `state`: The combination of the initial state and the last element of
  each accumulated state.</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CDCgov/Rt-without-renewal/blob/822a0aa5f1bf87486681c940e125ef12cd5f52a6/src/EpiAwareUtils/accumulate_scan.jl#L44">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="EpiAware.EpiAwareUtils.prefix_submodel-Tuple{AbstractModel, Function, String, Vararg{Any}}" href="#EpiAware.EpiAwareUtils.prefix_submodel-Tuple{AbstractModel, Function, String, Vararg{Any}}"><code>EpiAware.EpiAwareUtils.prefix_submodel</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">prefix_submodel(
    model::AbstractModel,
    fn::Function,
    prefix::String,
    kwargs...
) -&gt; Any
</code></pre><p>Generate a submodel with an optional prefix. A lightweight wrapper around the <code>@submodel</code> macro from DynamicPPL.jl.</p><p><strong>Arguments</strong></p><ul><li><code>model::AbstractModel</code>: The model to be used.</li><li><code>fn::Function</code>: The Turing @model function to be applied to the model.</li><li><code>prefix::String</code>: The prefix to be used. If the prefix is an empty string, the submodel is created without a prefix.</li></ul><p><strong>Returns</strong></p><ul><li><code>submodel</code>: The returns from the submodel are passed through.</li></ul><p><strong>Examples</strong></p><pre><code class="language- hljs">using EpiAware, DynamicPPL
submodel = prefix_submodel(FixedIntercept(0.1), generate_latent, string(1), 2)</code></pre><p>We can now draw a sample from the submodel.</p><pre><code class="language-julia hljs">rand(submodel)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CDCgov/Rt-without-renewal/blob/822a0aa5f1bf87486681c940e125ef12cd5f52a6/src/EpiAwareUtils/prefix_submodel.jl#L1">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="EpiAware.EpiAwareUtils.scan-Union{Tuple{F}, Tuple{F, Any, Any}} where F&lt;:AbstractModel" href="#EpiAware.EpiAwareUtils.scan-Union{Tuple{F}, Tuple{F, Any, Any}} where F&lt;:AbstractModel"><code>EpiAware.EpiAwareUtils.scan</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">scan(f::AbstractModel, init, xs) -&gt; Tuple{Any, Any}
</code></pre><p>Apply <code>f</code> to each element of <code>xs</code> and accumulate the results.</p><p><code>f</code> must be a <a href="https://docs.julialang.org/en/v1/manual/methods/#Function-like-objects">callable</a>     on a sub-type of <code>AbstractModel</code>.</p><p><strong>Design note</strong></p><p><code>scan</code> is being restricted to <code>AbstractModel</code> sub-types to ensure:     1. That compiler specialization is <a href="https://docs.julialang.org/en/v1/manual/performance-tips/#Be-aware-of-when-Julia-avoids-specializing">activated</a>     2. Also avoids potential compiler <a href="https://docs.julialang.org/en/v1/devdocs/functions/#compiler-efficiency-issues">overhead</a>     from specialisation on <code>f&lt;: Function</code>.</p><p><strong>Arguments</strong></p><ul><li><code>f</code>: A callable/functor that takes two arguments, <code>carry</code> and <code>x</code>, and returns a new   <code>carry</code> and a result <code>y</code>.</li><li><code>init</code>: The initial value for the <code>carry</code> variable.</li><li><code>xs</code>: An iterable collection of elements.</li></ul><p><strong>Returns</strong></p><ul><li><code>ys</code>: An array containing the results of applying <code>f</code> to each element of <code>xs</code>.</li><li><code>carry</code>: The final value of the <code>carry</code> variable after processing all elements of <code>xs</code>.</li></ul><p><strong>Examples</strong></p><p>```jldoctest using EpiAware</p><p>struct Adder &lt;: EpiAwareBase.AbstractModel end function (a::Adder)(carry, x)     carry + x, carry + x end</p><p>scan(Adder(), 0, 1:5) #output ([1, 3, 6, 10, 15], 15)</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CDCgov/Rt-without-renewal/blob/822a0aa5f1bf87486681c940e125ef12cd5f52a6/src/EpiAwareUtils/scan.jl#L1">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="EpiAware.EpiAwareUtils.spread_draws-Tuple{MCMCChains.Chains}" href="#EpiAware.EpiAwareUtils.spread_draws-Tuple{MCMCChains.Chains}"><code>EpiAware.EpiAwareUtils.spread_draws</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">spread_draws(chn::MCMCChains.Chains) -&gt; DataFrames.DataFrame
</code></pre><pre><code class="nohighlight hljs">spread_draws(chn::Chains)</code></pre><p>Converts a <code>Chains</code> object into a DataFrame in <code>tidybayes</code> format.</p><p><strong>Arguments</strong></p><ul><li><code>chn::Chains</code>: The <code>Chains</code> object to be converted.</li></ul><p><strong>Returns</strong></p><ul><li><code>df::DataFrame</code>: The converted DataFrame.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CDCgov/Rt-without-renewal/blob/822a0aa5f1bf87486681c940e125ef12cd5f52a6/src/EpiAwareUtils/post-inference.jl#L1">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="EpiAware.EpiAwareUtils.∫F-Tuple{Any, Any, Any}" href="#EpiAware.EpiAwareUtils.∫F-Tuple{Any, Any, Any}"><code>EpiAware.EpiAwareUtils.∫F</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">∫F(dist, t, Δd) -&gt; Any
</code></pre><p>Calculate the CDF of the random variable <code>X + U</code> where <code>X</code> has cumulative distriubtion function <code>F</code> and <code>U</code> is a uniform random variable on <code>[0, Δd)</code>.</p><p>This is used in solving for censored CDFs and PMFs using numerical quadrature.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CDCgov/Rt-without-renewal/blob/822a0aa5f1bf87486681c940e125ef12cd5f52a6/src/EpiAwareUtils/censored_pmf.jl#L87">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../">« Overview</a><a class="docs-footer-nextpage" href="../internals/">Internal API »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.7.0 on <span class="colophon-date" title="Thursday 24 October 2024 15:42">Thursday 24 October 2024</span>. Using Julia version 1.11.0.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
