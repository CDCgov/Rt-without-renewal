<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Public API · EpiAware.jl</title><meta name="title" content="Public API · EpiAware.jl"/><meta property="og:title" content="Public API · EpiAware.jl"/><meta property="twitter:title" content="Public API · EpiAware.jl"/><meta name="description" content="Documentation for EpiAware.jl."/><meta property="og:description" content="Documentation for EpiAware.jl."/><meta property="twitter:description" content="Documentation for EpiAware.jl."/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../../">EpiAware.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../">EpiAware.jl: Real-time epidemic monitoring</a></li><li><span class="tocitem">Manual</span><ul><li><a class="tocitem" href="../../man/guide/">Guide</a></li><li><input class="collapse-toggle" id="menuitem-2-2" type="checkbox"/><label class="tocitem" for="menuitem-2-2"><span class="docs-label">Examples</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../examples/getting_started/">Getting started</a></li></ul></li></ul></li><li><span class="tocitem">Reference</span><ul><li class="is-active"><a class="tocitem" href>Public API</a><ul class="internal"><li><a class="tocitem" href="#Contents"><span>Contents</span></a></li><li><a class="tocitem" href="#Index"><span>Index</span></a></li><li><a class="tocitem" href="#Public-API"><span>Public API</span></a></li></ul></li></ul></li><li><span class="tocitem">Developers</span><ul><li><a class="tocitem" href="../../contributing/">Contributing</a></li><li><a class="tocitem" href="../../checklist/">Release checklist</a></li><li><a class="tocitem" href="../internals/">Internals</a></li></ul></li><li><a class="tocitem" href="../../release-notes/">Release notes</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Reference</a></li><li class="is-active"><a href>Public API</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Public API</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/CDCgov/Rt-without-renewal" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/CDCgov/Rt-without-renewal/blob/main/docs/src/lib/public.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Public-Documentation"><a class="docs-heading-anchor" href="#Public-Documentation">Public Documentation</a><a id="Public-Documentation-1"></a><a class="docs-heading-anchor-permalink" href="#Public-Documentation" title="Permalink"></a></h1><p>Documentation for <code>EpiAware.jl</code>&#39;s public interface.</p><p>See the Internals section of the manual for internal package docs covering all submodules.</p><h2 id="Contents"><a class="docs-heading-anchor" href="#Contents">Contents</a><a id="Contents-1"></a><a class="docs-heading-anchor-permalink" href="#Contents" title="Permalink"></a></h2><ul><li><a href="#Contents">Contents</a></li><li><a href="#Index">Index</a></li><li><a href="#Public-API">Public API</a></li></ul><h2 id="Index"><a class="docs-heading-anchor" href="#Index">Index</a><a id="Index-1"></a><a class="docs-heading-anchor-permalink" href="#Index" title="Permalink"></a></h2><ul><li><a href="#EpiAware.EpiAware"><code>EpiAware.EpiAware</code></a></li><li><a href="#EpiAware.AbstractEpiModel"><code>EpiAware.AbstractEpiModel</code></a></li><li><a href="#EpiAware.DirectInfections"><code>EpiAware.DirectInfections</code></a></li><li><a href="#EpiAware.EpiData"><code>EpiAware.EpiData</code></a></li><li><a href="#EpiAware.ExpGrowthRate"><code>EpiAware.ExpGrowthRate</code></a></li><li><a href="#EpiAware.Renewal"><code>EpiAware.Renewal</code></a></li><li><a href="#EpiAware.Renewal-Tuple{Any, Any}"><code>EpiAware.Renewal</code></a></li><li><a href="#EpiAware.R_to_r-Union{Tuple{T}, Tuple{Any, Vector{T}}} where T&lt;:AbstractFloat"><code>EpiAware.R_to_r</code></a></li><li><a href="#EpiAware.create_discrete_pmf-Tuple{Distributions.Distribution, Val{:single_censored}}"><code>EpiAware.create_discrete_pmf</code></a></li><li><a href="#EpiAware.create_discrete_pmf-Tuple{Distributions.Distribution}"><code>EpiAware.create_discrete_pmf</code></a></li><li><a href="#EpiAware.generate_latent_infs-Tuple{DirectInfections, Any}"><code>EpiAware.generate_latent_infs</code></a></li><li><a href="#EpiAware.generate_latent_infs-Tuple{Renewal, Any}"><code>EpiAware.generate_latent_infs</code></a></li><li><a href="#EpiAware.generate_latent_infs-Tuple{AbstractEpiModel, Any}"><code>EpiAware.generate_latent_infs</code></a></li><li><a href="#EpiAware.generate_latent_infs-Tuple{ExpGrowthRate, Any}"><code>EpiAware.generate_latent_infs</code></a></li><li><a href="#EpiAware.manypathfinder-Tuple{DynamicPPL.Model, Any}"><code>EpiAware.manypathfinder</code></a></li><li><a href="#EpiAware.r_to_R-Tuple{Any, AbstractVector}"><code>EpiAware.r_to_R</code></a></li><li><a href="#EpiAware.scan-Union{Tuple{F}, Tuple{F, Any, Any}} where F&lt;:AbstractModel"><code>EpiAware.scan</code></a></li><li><a href="#EpiAware.spread_draws-Tuple{MCMCChains.Chains}"><code>EpiAware.spread_draws</code></a></li></ul><h2 id="Public-API"><a class="docs-heading-anchor" href="#Public-API">Public API</a><a id="Public-API-1"></a><a class="docs-heading-anchor-permalink" href="#Public-API" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="EpiAware.EpiAware" href="#EpiAware.EpiAware"><code>EpiAware.EpiAware</code></a> — <span class="docstring-category">Module</span></header><section><div><pre><code class="language-julia hljs">module EpiAware</code></pre><p><code>EpiAware</code> provides functionality for fitting epidemiological models to data. It is built on      top of the <code>Turing</code> probabilistic programming language, and provides a set of utilities      for constructing and fitting models to data.</p><p><strong>Core model structure</strong></p><p>An epidemiological model in <code>EpiAware</code> consists of composable structs with core abstract     types. The core types are:</p><ol><li><code>AbstractModel</code>: This overarching type is used to abstract <code>Turing</code> models and is inheried by the other abstract types we use.</li><li><code>AbstractEpiModel</code>: Subtypes of this abstract type represent different models for the   spread of an infectious disease. Each model type has a corresponding   <code>make_epi_aware</code> function that constructs a <code>Turing</code> model for fitting the       model to data. Implemented concrete subtypes:<ul><li><code>Renewal</code>: A renewal process model for the spread of an infectious disease.</li><li><code>ExpGrowthRate</code>: An exponential growth rate model for the spread of an infectious    disease.</li><li><code>DirectInfections</code>: A model for the spread of an infectious disease based on modelling   direct infections.</li></ul></li><li><code>AbstractLatentModel</code>: Subtypes of this abstract type represent different latent   processes that can be used in an epidemiological model. Implemented concrete subtype:<ul><li><code>RandomWalk</code>: A random walk latent process.</li></ul></li><li><code>AbstractObservationModel</code>: Subtypes of this abstract type represent different  observation models that can be used in an epidemiological model.  Implemented concrete subtypes:<ul><li><code>DelayObservation</code>: An observation process that models the delay between the time   of infection and the time of observation as a convolution, followed by a negative   binomial distributed sample.</li></ul></li></ol></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CDCgov/Rt-without-renewal/blob/246afd61ad1049beb8bc28b84add297263d2c30b/src/EpiAware.jl#L1-L32">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="EpiAware.AbstractEpiModel" href="#EpiAware.AbstractEpiModel"><code>EpiAware.AbstractEpiModel</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">abstract type AbstractEpiModel &lt;: AbstractModel</code></pre><pre><code class="nohighlight hljs">abstract type AbstractEpiModel &lt;: AbstractModel end</code></pre><p>The abstract supertype for all structs that define a model for generating unobserved/latent     infections.</p><hr/><p><strong>Fields</strong></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CDCgov/Rt-without-renewal/blob/246afd61ad1049beb8bc28b84add297263d2c30b/src/abstract-types.jl#L3">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="EpiAware.DirectInfections" href="#EpiAware.DirectInfections"><code>EpiAware.DirectInfections</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">struct DirectInfections{S&lt;:Distributions.Sampleable} &lt;: AbstractEpiModel</code></pre><p>Model unobserved/latent infections as a transformation on a sampled latent process.</p><p><strong>Mathematical specification</strong></p><p>If <span>$Z_t$</span> is a realisation of the latent model, then the unobserved/latent infections are given by</p><p class="math-container">\[I_t = g(\hat{I}_0 + Z_t).\]</p><p>where <span>$g$</span> is a transformation function and the unconstrained initial infections     <span>$\hat{I}_0$</span> are sampled from a prior distribution, <code>initialisation_prior</code> which must be supplied to the <code>DirectInfections</code> constructor. The default <code>initialisation_prior</code> is the standard Normal <code>Distributions.Normal()</code>.</p><p><strong>Constructor</strong></p><p><code>DirectInfections</code> can be constructed by passing an <code>EpiData</code> object and subtype of <a href="https://juliastats.org/Distributions.jl/latest/types/#Sampleable"><code>Distributions.Sampleable</code></a>.</p><p><strong>Example usage with <code>generate_latent_infs</code></strong></p><p><code>generate_latent_infs</code> can be used to construct a <code>Turing</code> model for the latent infections conditional on the sample path of a latent process. In this example, we generate a sample of a white noise latent process.</p><p>First, we construct a <code>DirectInfections</code> struct with an <code>EpiData</code> object, an initialisation prior and a transformation function.</p><pre><code class="language-julia hljs">using Distributions, Turing, EpiAware
gen_int = [0.2, 0.3, 0.5]
g = exp

# Create an EpiData object
data = EpiData(gen_int, g)

# Create a DirectInfections model
direct_inf_model = DirectInfections(data = data, initialisation_prior = Normal())</code></pre><p>Then, we can use <code>generate_latent_infs</code> to construct a Turing model for the unobserved infection generation model set by the type of <code>direct_inf_model</code>.</p><pre><code class="language-julia hljs"># Construct a Turing model
Z_t = randn(100)
latent_inf = generate_latent_infs(direct_inf_model, Z_t)</code></pre><p>Now we can use the <code>Turing</code> PPL API to sample underlying parameters and generate the unobserved infections.</p><pre><code class="language-julia hljs"># Sample from the unobserved infections model

#Sample random parameters from prior
θ = rand(latent_inf)
#Get unobserved infections as a generated quantities from the model
I_t = generated_quantities(latent_inf, θ)</code></pre><hr/><p><strong>Fields</strong></p><ul><li><p><code>data::EpiData</code>: <code>Epidata</code> object.</p></li><li><p><code>initialisation_prior::Distributions.Sampleable</code>: Prior distribution for the initialisation of the infections. Default is <code>Normal()</code>.</p></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CDCgov/Rt-without-renewal/blob/246afd61ad1049beb8bc28b84add297263d2c30b/src/epimodels/directinfections.jl#L1">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="EpiAware.EpiData" href="#EpiAware.EpiData"><code>EpiAware.EpiData</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">struct EpiData{T&lt;:Real, F&lt;:Function}</code></pre><p>The <code>EpiData</code> struct represents epidemiological data used in infectious disease modeling.</p><p><strong>Constructors</strong></p><ul><li><code>EpiData(gen_int, transformation::Function)</code>. Constructs an <code>EpiData</code> object with discrete</li></ul><p>generation interval <code>gen_int</code> and transformation function <code>transformation</code>.</p><ul><li><code>EpiData(;gen_distribution::ContinuousDistribution, D_gen, Δd = 1.0, transformation::Function = exp)</code>.</li></ul><p>Constructs an <code>EpiData</code> object with double interval censoring discretisation of the continuous next generation interval distribution <code>gen_distribution</code> with additional right truncation at <code>D_gen</code>. <code>Δd</code> sets the interval width (default = 1.0). <code>transformation</code> sets the transformation function</p><p><strong>Examples</strong></p><p>Construction direct from discrete generation interval and transformation function:</p><pre><code class="language-julia hljs">using EpiAware
gen_int = [0.2, 0.3, 0.5]
g = exp
data = EpiData(gen_int, g)</code></pre><p>Construction from continuous distribution for generation interval.</p><pre><code class="language-julia hljs">using Distributions

gen_distribution = Uniform(0.0, 10.0)

data = EpiData(;gen_distribution
    D_gen = 10.0)</code></pre><hr/><p><strong>Fields</strong></p><ul><li><p><code>gen_int::Vector{T} where T&lt;:Real</code>: Discrete generation interval.</p></li><li><p><code>len_gen_int::Integer</code>: Length of the discrete generation interval.</p></li><li><p><code>transformation::Function</code>: Transformation function defining constrained and unconstrained domain bijections.</p></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CDCgov/Rt-without-renewal/blob/246afd61ad1049beb8bc28b84add297263d2c30b/src/epimodels/epidata.jl#L1">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="EpiAware.ExpGrowthRate" href="#EpiAware.ExpGrowthRate"><code>EpiAware.ExpGrowthRate</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">struct ExpGrowthRate{S&lt;:Distributions.Sampleable} &lt;: AbstractEpiModel</code></pre><p>Model unobserved/latent infections as due to time-varying exponential growth rate <span>$r_t$</span> which is generated by a latent process.</p><p><strong>Mathematical specification</strong></p><p>If <span>$Z_t$</span> is a realisation of the latent model, then the unobserved/latent infections are given by</p><p class="math-container">\[I_t = g(\hat{I}_0) \exp(Z_t).\]</p><p>where <span>$g$</span> is a transformation function and the unconstrained initial infections     <span>$\hat{I}_0$</span> are sampled from a prior distribution, <code>initialisation_prior</code> which must be supplied to the <code>DirectInfections</code> constructor. The default <code>initialisation_prior</code> is the standard Normal <code>Distributions.Normal()</code>.</p><p><strong>Constructor</strong></p><p><code>ExpGrowthRate</code> can be constructed by passing an <code>EpiData</code> object and and subtype of <a href="https://juliastats.org/Distributions.jl/latest/types/#Sampleable"><code>Distributions.Sampleable</code></a>.</p><p><strong>Example usage with <code>generate_latent_infs</code></strong></p><p><code>generate_latent_infs</code> can be used to construct a <code>Turing</code> model for the latent infections conditional on the sample path of a latent process. In this example, we generate a sample of a white noise latent process.</p><p>First, we construct an <code>ExpGrowthRate</code> struct with an <code>EpiData</code> object, an initialisation prior and a transformation function.</p><pre><code class="language-julia hljs">using Distributions, Turing, EpiAware
gen_int = [0.2, 0.3, 0.5]
g = exp

# Create an EpiData object
data = EpiData(gen_int, g)

# Create an ExpGrowthRate model
exp_growth_model = ExpGrowthRate(data = data, initialisation_prior = Normal())</code></pre><p>Then, we can use <code>generate_latent_infs</code> to construct a Turing model for the unobserved infection generation model set by the type of <code>direct_inf_model</code>.</p><pre><code class="language-julia hljs"># Construct a Turing model
Z_t = randn(100) * 0.05
latent_inf = generate_latent_infs(exp_growth_model, Z_t)</code></pre><p>Now we can use the <code>Turing</code> PPL API to sample underlying parameters and generate the unobserved infections.</p><pre><code class="language-julia hljs"># Sample from the unobserved infections model

#Sample random parameters from prior
θ = rand(latent_inf)
#Get unobserved infections as a generated quantities from the model
I_t = generated_quantities(latent_inf, θ)</code></pre><hr/><p><strong>Fields</strong></p><ul><li><p><code>data::EpiData</code></p></li><li><p><code>initialisation_prior::Distributions.Sampleable</code></p></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CDCgov/Rt-without-renewal/blob/246afd61ad1049beb8bc28b84add297263d2c30b/src/epimodels/expgrowthrate.jl#L1">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="EpiAware.Renewal" href="#EpiAware.Renewal"><code>EpiAware.Renewal</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">struct Renewal{S&lt;:Distributions.Sampleable} &lt;: AbstractEpiModel</code></pre><p>Model unobserved/latent infections as due to time-varying Renewal model with reproduction number <span>$\mathcal{R}_t$</span> which is generated by a latent process.</p><p><strong>Mathematical specification</strong></p><p>If <span>$Z_t$</span> is a realisation of the latent model, then the unobserved/latent infections are given by</p><p class="math-container">\[\begin{align}
\mathcal{R}_t &amp;= g(Z_t),\\
I_t &amp;= \mathcal{R}_t \sum_{i=1}^{n-1} I_{t-i} g_i, \qquad t \geq 1, \\
I_t &amp;= g(\hat{I}_0) \exp(r(\mathcal{R}_1) t), \qquad t \leq 0.
\end{align}\]</p><p>where <span>$g$</span> is a transformation function and the unconstrained initial infections <span>$\hat{I}_0$</span> are sampled from a prior distribution, <code>initialisation_prior</code> which must be supplied to the <code>DirectInfections</code> constructor. The default <code>initialisation_prior</code> is the standard Normal <code>Distributions.Normal()</code>. The discrete generation interval is given by <span>$g_i$</span>.</p><p><span>$r(\mathcal{R}_1)$</span> is the exponential growth rate implied by <span>$\mathcal{R}_1)$</span> using the implicit relationship between the exponential growth rate and the reproduction number.</p><p class="math-container">\[\mathcal{R} \sum_{j \geq 1} g_j \exp(- r j)= 1.\]</p><p><strong>Constructor</strong></p><p><code>Renewal</code> can be constructed by passing an <code>EpiData</code> object and and subtype of <a href="https://juliastats.org/Distributions.jl/latest/types/#Sampleable"><code>Distributions.Sampleable</code></a>.</p><p><strong>Example usage with <code>generate_latent_infs</code></strong></p><p><code>generate_latent_infs</code> can be used to construct a <code>Turing</code> model for the latent infections conditional on the sample path of a latent process. In this example, we generate a sample of a white noise latent process.</p><p>First, we construct an <code>Renewal</code> struct with an <code>EpiData</code> object, an initialisation prior and a transformation function.</p><pre><code class="language-julia hljs">using Distributions, Turing, EpiAware
gen_int = [0.2, 0.3, 0.5]
g = exp

# Create an EpiData object
data = EpiData(gen_int, g)

# Create an Renewal model
renewal_model = Renewal(data = data, initialisation_prior = Normal())</code></pre><p>Then, we can use <code>generate_latent_infs</code> to construct a Turing model for the unobserved infection generation model set by the type of <code>direct_inf_model</code>.</p><pre><code class="language-julia hljs"># Construct a Turing model
Z_t = randn(100) * 0.05
latent_inf = generate_latent_infs(renewal_model, Z_t)</code></pre><p>Now we can use the <code>Turing</code> PPL API to sample underlying parameters and generate the unobserved infections.</p><pre><code class="language-julia hljs"># Sample from the unobserved infections model

#Sample random parameters from prior
θ = rand(latent_inf)
#Get unobserved infections as a generated quantities from the model
I_t = generated_quantities(latent_inf, θ)</code></pre><hr/><p><strong>Fields</strong></p><ul><li><p><code>data::EpiData</code></p></li><li><p><code>initialisation_prior::Distributions.Sampleable</code></p></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CDCgov/Rt-without-renewal/blob/246afd61ad1049beb8bc28b84add297263d2c30b/src/epimodels/renewal.jl#L1">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="EpiAware.Renewal-Tuple{Any, Any}" href="#EpiAware.Renewal-Tuple{Any, Any}"><code>EpiAware.Renewal</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Callable on a <code>Renewal</code> struct for compute new incidence based on recent incidence and Rt.</p><p><strong>Mathematical specification</strong></p><p>The new incidence is given by</p><p class="math-container">\[I_t = R_t \sum_{i=1}^{n-1} I_{t-i} g_i\]</p><p>where <code>I_t</code> is the new incidence, <code>R_t</code> is the reproduction number, <code>I_{t-i}</code> is the recent incidence and <code>g_i</code> is the generation interval.</p><p><strong>Arguments</strong></p><ul><li><code>recent_incidence</code>: Array of recent incidence values.</li><li><code>Rt</code>: Reproduction number.</li></ul><p><strong>Returns</strong></p><ul><li>Tuple containing the updated incidence array and the new incidence value.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CDCgov/Rt-without-renewal/blob/246afd61ad1049beb8bc28b84add297263d2c30b/src/epimodels/renewal.jl#L84">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="EpiAware.R_to_r-Union{Tuple{T}, Tuple{Any, Vector{T}}} where T&lt;:AbstractFloat" href="#EpiAware.R_to_r-Union{Tuple{T}, Tuple{Any, Vector{T}}} where T&lt;:AbstractFloat"><code>EpiAware.R_to_r</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">R_to_r(
    R₀,
    w::Array{T&lt;:AbstractFloat, 1};
    newton_steps,
    Δd
) -&gt; Any
</code></pre><p>This function computes an approximation to the exponential growth rate <code>r</code> given the reproductive ratio <code>R₀</code> and the discretized generation interval <code>w</code> with discretized interval width <code>Δd</code>. This is based on the implicit solution of</p><p class="math-container">\[G(r) - {1 \over R_0} = 0.\]</p><p>where</p><p class="math-container">\[G(r) = \sum_{i=1}^n w_i e^{-r i}.\]</p><p>is the negative moment generating function (MGF) of the generation interval distribution.</p><p>The two step approximation is based on:     1. Direct solution of implicit equation for a small <code>r</code> approximation.     2. Improving the approximation using Newton&#39;s method for a fixed number of steps <code>newton_steps</code>.</p><p>Returns:</p><ul><li>The approximate value of <code>r</code>.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CDCgov/Rt-without-renewal/blob/246afd61ad1049beb8bc28b84add297263d2c30b/src/utils/dist.jl#L96">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="EpiAware.create_discrete_pmf-Tuple{Distributions.Distribution, Val{:single_censored}}" href="#EpiAware.create_discrete_pmf-Tuple{Distributions.Distribution, Val{:single_censored}}"><code>EpiAware.create_discrete_pmf</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">create_discrete_pmf(
    dist::Distributions.Distribution,
    ::Val{:single_censored};
    primary_approximation_point,
    Δd,
    D
)
</code></pre><p>Create a discrete probability mass function (PMF) from a given distribution, assuming that the primary event happens at <code>primary_approximation_point * Δd</code> within an intial censoring interval. Common single-censoring approximations are <code>primary_approximation_point = 0</code> (left-hand approximation), <code>primary_approximation_point = 1</code> (right-hand) and <code>primary_approximation_point = 0.5</code> (midpoint).</p><p>Arguments:</p><ul><li><code>dist</code>: The distribution from which to create the PMF.</li><li>::Val{:single_censored}: A dummy argument to dispatch to this method. The purpose of the <code>Val</code></li></ul><p>type argument is that to use <code>single-censored</code> approximation is an active decision.</p><ul><li><code>primary_approximation_point</code>: A approximation point for the primary time in its censoring interval.</li></ul><p>Default is 0.5 for midpoint approximation.</p><ul><li><code>Δd</code>: The step size for discretizing the domain. Default is 1.0.</li><li><code>D</code>: The upper bound of the domain. Must be greater than <code>Δd</code>.</li></ul><p>Returns:</p><ul><li>A vector representing the PMF.</li></ul><p>Raises:</p><ul><li><code>AssertionError</code> if the minimum value of <code>dist</code> is negative.</li><li><code>AssertionError</code> if <code>Δd</code> is not positive.</li><li><code>AssertionError</code> if <code>D</code> is not greater than <code>Δd</code>.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CDCgov/Rt-without-renewal/blob/246afd61ad1049beb8bc28b84add297263d2c30b/src/utils/dist.jl#L1">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="EpiAware.create_discrete_pmf-Tuple{Distributions.Distribution}" href="#EpiAware.create_discrete_pmf-Tuple{Distributions.Distribution}"><code>EpiAware.create_discrete_pmf</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">create_discrete_pmf(dist::Distributions.Distribution; Δd, D)
</code></pre><p>Create a discrete probability mass function (PMF) from a given distribution, assuming a uniform distribution over primary event times with censoring intervals of width <code>Δd</code> for both primary and secondary events. The CDF for the time from the left edge of the interval containing the primary event to the secondary event is created by direct numerical integration of the convolution of the CDF of <code>dist</code> with the uniform density on <code>[0,Δd)</code>, the discrete PMF for double censored delays is then found using simple differencing on the CDF.</p><p>Arguments:</p><ul><li><code>dist</code>: The distribution from which to create the PMF.</li><li><code>Δd</code>: The step size for discretizing the domain. Default is 1.0.</li><li><code>D</code>: The upper bound of the domain. Must be greater than <code>Δd</code>.</li></ul><p>Returns:</p><ul><li>A vector representing the PMF.</li></ul><p>Raises:</p><ul><li><code>AssertionError</code> if the minimum value of <code>dist</code> is negative.</li><li><code>AssertionError</code> if <code>Δd</code> is not positive.</li><li><code>AssertionError</code> if <code>D</code> is not greater than <code>Δd</code>.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CDCgov/Rt-without-renewal/blob/246afd61ad1049beb8bc28b84add297263d2c30b/src/utils/dist.jl#L41">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="EpiAware.generate_latent_infs-Tuple{AbstractEpiModel, Any}" href="#EpiAware.generate_latent_infs-Tuple{AbstractEpiModel, Any}"><code>EpiAware.generate_latent_infs</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">generate_latent_infs(
    epi_model::AbstractEpiModel,
    Z_t
) -&gt; Any
</code></pre><p>Generate unobserved/latent infections based on the given <code>epi_model &lt;: AbstractEpimodel</code>     and a latent process path <span>$Z_t$</span>.</p><p>The <code>generate_latent_infs</code> function implements a model of generating unobserved/latent infections conditional on a latent process. Which model of generating unobserved/latent infections to be implemented is set by the type of <code>epi_model</code>. If no implemention is defined for the given <code>epi_model</code>, then <code>EpiAware</code> will return a warning and return <code>nothing</code>.</p><p><strong>Interface to <code>Turing.jl</code> probablilistic programming language (PPL)</strong></p><p>Apart from the no implementation fallback method, the <code>generate_latent_infs</code> implementation function should be a constructor function for a     <a href="https://turinglang.org/DynamicPPL.jl/stable/api/#DynamicPPL.Model"><code>DynamicPPL.Model</code></a>     object.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CDCgov/Rt-without-renewal/blob/246afd61ad1049beb8bc28b84add297263d2c30b/src/abstract-types.jl#L15">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="EpiAware.generate_latent_infs-Tuple{DirectInfections, Any}" href="#EpiAware.generate_latent_infs-Tuple{DirectInfections, Any}"><code>EpiAware.generate_latent_infs</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">generate_latent_infs(
    epi_model::DirectInfections,
    Z_t
) -&gt; Any
</code></pre><p>Implement the <code>generate_latent_infs</code> function for the <code>DirectInfections</code> model.</p><p><strong>Example usage with <code>DirectInfections</code> type of model for unobserved infection process</strong></p><p>First, we construct a <code>DirectInfections</code> struct with an <code>EpiData</code> object, an initialisation prior and a transformation function.</p><pre><code class="language-julia hljs">using Distributions, Turing, EpiAware
gen_int = [0.2, 0.3, 0.5]
g = exp

# Create an EpiData object
data = EpiData(gen_int, g)

# Create a DirectInfections model
direct_inf_model = DirectInfections(data = data, initialisation_prior = Normal())</code></pre><p>Then, we can use <code>generate_latent_infs</code> to construct a Turing model for the unobserved infection generation model set by the type of <code>direct_inf_model</code>.</p><pre><code class="language-julia hljs"># Construct a Turing model
Z_t = randn(100)
latent_inf = generate_latent_infs(direct_inf_model, Z_t)</code></pre><p>Now we can use the <code>Turing</code> PPL API to sample underlying parameters and generate the unobserved infections.</p><pre><code class="language-julia hljs"># Sample from the unobserved infections model

#Sample random parameters from prior
θ = rand(latent_inf)
#Get unobserved infections as a generated quantities from the model
I_t = generated_quantities(latent_inf, θ)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CDCgov/Rt-without-renewal/blob/246afd61ad1049beb8bc28b84add297263d2c30b/src/epimodels/directinfections.jl#L73">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="EpiAware.generate_latent_infs-Tuple{ExpGrowthRate, Any}" href="#EpiAware.generate_latent_infs-Tuple{ExpGrowthRate, Any}"><code>EpiAware.generate_latent_infs</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">generate_latent_infs(epi_model::ExpGrowthRate, rt) -&gt; Any
</code></pre><p>Implement the <code>generate_latent_infs</code> function for the <code>ExpGrowthRate</code> model.</p><p><strong>Example usage with <code>ExpGrowthRate</code> type of model for unobserved infection process</strong></p><p><code>generate_latent_infs</code> can be used to construct a <code>Turing</code> model for the latent infections conditional on the sample path of a latent process. In this example, we generate a sample of a white noise latent process.</p><p>First, we construct an <code>ExpGrowthRate</code> struct with an <code>EpiData</code> object, an initialisation prior and a transformation function.</p><pre><code class="language-julia hljs">using Distributions, Turing, EpiAware
gen_int = [0.2, 0.3, 0.5]
g = exp

# Create an EpiData object
data = EpiData(gen_int, g)

# Create an ExpGrowthRate model
exp_growth_model = ExpGrowthRate(data = data, initialisation_prior = Normal())</code></pre><p>Then, we can use <code>generate_latent_infs</code> to construct a Turing model for the unobserved infection generation model set by the type of <code>direct_inf_model</code>.</p><pre><code class="language-julia hljs"># Construct a Turing model
Z_t = randn(100) * 0.05
latent_inf = generate_latent_infs(exp_growth_model, Z_t)</code></pre><p>Now we can use the <code>Turing</code> PPL API to sample underlying parameters and generate the unobserved infections.</p><pre><code class="language-julia hljs"># Sample from the unobserved infections model

#Sample random parameters from prior
θ = rand(latent_inf)
#Get unobserved infections as a generated quantities from the model
I_t = generated_quantities(latent_inf, θ)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CDCgov/Rt-without-renewal/blob/246afd61ad1049beb8bc28b84add297263d2c30b/src/epimodels/expgrowthrate.jl#L71">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="EpiAware.generate_latent_infs-Tuple{Renewal, Any}" href="#EpiAware.generate_latent_infs-Tuple{Renewal, Any}"><code>EpiAware.generate_latent_infs</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">generate_latent_infs(epi_model::Renewal, _Rt) -&gt; Any
</code></pre><p>Implement the <code>generate_latent_infs</code> function for the <code>Renewal</code> model.</p><p><strong>Example usage with <code>Renewal</code> type of model for unobserved infection process</strong></p><p><code>generate_latent_infs</code> can be used to construct a <code>Turing</code> model for the latent infections conditional on the sample path of a latent process. In this example, we generate a sample of a white noise latent process.</p><p>First, we construct an <code>Renewal</code> struct with an <code>EpiData</code> object, an initialisation prior and a transformation function.</p><pre><code class="language-julia hljs">using Distributions, Turing, EpiAware
gen_int = [0.2, 0.3, 0.5]
g = exp

# Create an EpiData object
data = EpiData(gen_int, g)

# Create an Renewal model
renewal_model = Renewal(data = data, initialisation_prior = Normal())</code></pre><p>Then, we can use <code>generate_latent_infs</code> to construct a Turing model for the unobserved infection generation model set by the type of <code>renewal_model</code>.</p><pre><code class="language-julia hljs"># Construct a Turing model
Z_t = randn(100) * 0.05
latent_inf = generate_latent_infs(renewal_model, Z_t)</code></pre><p>Now we can use the <code>Turing</code> PPL API to sample underlying parameters and generate the unobserved infections.</p><pre><code class="language-julia hljs"># Sample from the unobserved infections model

#Sample random parameters from prior
θ = rand(latent_inf)
#Get unobserved infections as a generated quantities from the model
I_t = generated_quantities(latent_inf, θ)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CDCgov/Rt-without-renewal/blob/246afd61ad1049beb8bc28b84add297263d2c30b/src/epimodels/renewal.jl#L111">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="EpiAware.manypathfinder-Tuple{DynamicPPL.Model, Any}" href="#EpiAware.manypathfinder-Tuple{DynamicPPL.Model, Any}"><code>EpiAware.manypathfinder</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">manypathfinder(
    mdl::DynamicPPL.Model,
    ndraws;
    nruns,
    maxiters,
    max_tries,
    kwargs...
) -&gt; Any
</code></pre><p>Run multiple instances of the pathfinder algorithm and returns the pathfinder run with the largest ELBO estimate.</p><p><strong>Arguments</strong></p><ul><li><code>mdl::DynamicPPL.Model</code>: The model to perform inference on.</li><li><code>nruns::Int</code>: The number of pathfinder runs to perform.</li><li><code>ndraws::Int</code>: The number of draws per pathfinder run, readjusted to be at least as large   as the number of chains.</li><li><code>nchains::Int</code>: The number of chains that will be initialised by pathfinder draws.</li><li><code>maxiters::Int</code>: The maximum number of optimizer iterations per pathfinder run.</li><li><code>max_tries::Int</code>: The maximum number of extra tries to find a valid pathfinder result.</li><li><code>kwargs...</code>: Additional keyword arguments passed to <code>pathfinder</code>.</li></ul><p><strong>Returns</strong></p><ul><li><code>best_pfs::PathfinderResult</code>: Best pathfinder result by estimated ELBO.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CDCgov/Rt-without-renewal/blob/246afd61ad1049beb8bc28b84add297263d2c30b/src/inferencemethods/manypathfinder.jl#L79">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="EpiAware.r_to_R-Tuple{Any, AbstractVector}" href="#EpiAware.r_to_R-Tuple{Any, AbstractVector}"><code>EpiAware.r_to_R</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">r_to_R(r, w::AbstractVector) -&gt; Any
</code></pre><pre><code class="nohighlight hljs">r_to_R(r, w)</code></pre><p>Compute the reproductive ratio given exponential growth rate <code>r</code>     and discretized generation interval <code>w</code>.</p><p><strong>Arguments</strong></p><ul><li><code>r</code>: The exponential growth rate.</li><li><code>w</code>: discretized generation interval.</li></ul><p><strong>Returns</strong></p><ul><li>The reproductive ratio.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CDCgov/Rt-without-renewal/blob/246afd61ad1049beb8bc28b84add297263d2c30b/src/utils/dist.jl#L135">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="EpiAware.scan-Union{Tuple{F}, Tuple{F, Any, Any}} where F&lt;:AbstractModel" href="#EpiAware.scan-Union{Tuple{F}, Tuple{F, Any, Any}} where F&lt;:AbstractModel"><code>EpiAware.scan</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">scan(f::AbstractModel, init, xs) -&gt; Tuple{Any, Any}
</code></pre><p>Apply <code>f</code> to each element of <code>xs</code> and accumulate the results.</p><p><code>f</code> must be a <a href="https://docs.julialang.org/en/v1/manual/methods/#Function-like-objects">callable</a>     on a sub-type of <code>AbstractModel</code>.</p><p><strong>Design note</strong></p><p><code>scan</code> is being restricted to <code>AbstractModel</code> sub-types to ensure:     1. That compiler specialization is <a href="https://docs.julialang.org/en/v1/manual/performance-tips/#Be-aware-of-when-Julia-avoids-specializing">activated</a>     2. Also avoids potential compiler <a href="https://docs.julialang.org/en/v1/devdocs/functions/#compiler-efficiency-issues">overhead</a>     from specialisation on <code>f&lt;: Function</code>.</p><p><strong>Arguments</strong></p><ul><li><code>f</code>: A callable/functor that takes two arguments, <code>carry</code> and <code>x</code>, and returns a new   <code>carry</code> and a result <code>y</code>.</li><li><code>init</code>: The initial value for the <code>carry</code> variable.</li><li><code>xs</code>: An iterable collection of elements.</li></ul><p><strong>Returns</strong></p><ul><li><code>ys</code>: An array containing the results of applying <code>f</code> to each element of <code>xs</code>.</li><li><code>carry</code>: The final value of the <code>carry</code> variable after processing all elements of <code>xs</code>.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CDCgov/Rt-without-renewal/blob/246afd61ad1049beb8bc28b84add297263d2c30b/src/utils/scan.jl#L1">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="EpiAware.spread_draws-Tuple{MCMCChains.Chains}" href="#EpiAware.spread_draws-Tuple{MCMCChains.Chains}"><code>EpiAware.spread_draws</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">spread_draws(chn::MCMCChains.Chains) -&gt; DataFrames.DataFrame
</code></pre><pre><code class="nohighlight hljs">spread_draws(chn::Chains)</code></pre><p>Converts a <code>Chains</code> object into a DataFrame in <code>tidybayes</code> format.</p><p><strong>Arguments</strong></p><ul><li><code>chn::Chains</code>: The <code>Chains</code> object to be converted.</li></ul><p><strong>Returns</strong></p><ul><li><code>df::DataFrame</code>: The converted DataFrame.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CDCgov/Rt-without-renewal/blob/246afd61ad1049beb8bc28b84add297263d2c30b/src/utils/post-inference.jl#L1">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../../examples/getting_started/">« Getting started</a><a class="docs-footer-nextpage" href="../../contributing/">Contributing »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.3.0 on <span class="colophon-date" title="Tuesday 12 March 2024 20:21">Tuesday 12 March 2024</span>. Using Julia version 1.10.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
